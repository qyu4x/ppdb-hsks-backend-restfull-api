version: "3"
services:
    ppdb-mariadb:
        container_name: ppdb-mariadb
        image: mariadb:latest
        restart: always
        ports:
            - 3307:3306
        environment:
            - MYSQL_ROOT_PASSWORD=neko
            - MYSQL_DATABASE=ppdb_hsks_online
            - MYSQL_USER=neko
            - MYSQL_PASSWORD=neko
            - MYSQL_MAX_ALLOWED_PACKET=128M
        volumes:
            - ./init.sql:/docker-entrypoint-initdb.d/init.sql
            - mariadb-data-master:/var/lib/mysql
        networks:
            - ppdb-networks
    ppdb-backend:
        build: .
        ports:
            - 8000:8000
        depends_on:
            - ppdb-mariadb
        networks:
            - ppdb-networks
networks:
    ppdb-networks:
        name: ppdb-networks

volumes:
    mariadb-data-master:
